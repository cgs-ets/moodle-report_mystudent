{"version":3,"file":"academicinfo.min.js","sources":["../src/academicinfo.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// /**\n//  * @package   report_mystudent\n//  * @copyright 2022 Veronica Bermegui\n//  * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n//  */\n\ndefine(['jquery', 'core/log', 'report_mystudent/chart', 'core/ajax'], function ($, Log, Chart, Ajax) {\n    'use strict';\n\n    function init(origin) {\n        if (origin == 'dashboard') {\n            getGradesEffortTrend();\n        } else { // Im in the view for this section.\n            document.getElementById(\"searchReportInput\").addEventListener('keyup', filterYear);\n            document.getElementById(\"searchByClassGradeInput\").addEventListener('keyup', filterByClass);\n            document.getElementById(\"searchByClassEffortInput\").addEventListener('keyup', filterByClass);\n            document.querySelector('.pop-up-grade').addEventListener('click', popup);\n            document.querySelector('.pop-up-effort').addEventListener('click', popup);\n            document.querySelectorAll('.file-pdf').forEach(function (icon) {\n                icon.addEventListener('click', displayReportService)\n            });\n           \n            getEffortHistory();\n            getAssign();\n            getGradeHistory(); // Takes the longest\n        }\n    }\n\n    function getGradesEffortTrend() {\n\n        const username = document.querySelector('[data-username]').getAttribute('data-username');\n        const campus = document.querySelector('[data-campus]').getAttribute('data-campus');\n\n        document.getElementById(\"overlay\").style.display = \"flex\";\n        document.querySelector('.card-img-academic').firstElementChild.style.display = \"flex\";\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_grade_effort_trend',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                const htmlResult = response.result;\n                Log.debug(htmlResult);\n               \n                if (campus == 'Senior') {\n                    trendChartSenior(htmlResult);\n                } else {\n                    trendChartPrimary(htmlResult);\n                }\n            },\n\n            fail: function (reason) {\n                Log.debug(reason);\n                // remove spinner\n                document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n                $('#card-body-academic-info-text').replaceWith('<p class=\"card-text alert alert-danger\" id =\"card-body-academic-info-text\" >Data not available. Please try later</p>');\n            }\n        }]);\n\n    };\n\n    function trendChartSenior(result) {\n        const isEmpty = result == null || Object.keys(result).length === 0;\n        if (isEmpty) {\n            document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n            $('#card-body-academic-info-text').replaceWith('<p class=\"card-text alert alert-danger\" id =\"card-body-academic-info-text\" >Data not available.</p>');\n        } else {\n\n            const ctx = document.getElementById(\"chart-academic\");\n            if (!ctx) {\n                return;\n            }\n    \n            const performance = JSON.parse(result);\n            let labels = [];\n            let sets = [];\n            let attendance = [];\n            let effort = [];\n            let grades = [];\n            let gradeperterm = [];\n    \n            const TAGS = {\n                avgattendance: 'Average Attendance',\n                avgeffort: 'Average Effort',\n                avggrades: 'Average Grade',\n            }\n    \n            for (let i = 0; i < performance.length; i++) {\n                var p = performance[i];\n    \n                const year = p.details.year.toString();\n                const term = p.details.term.toString();\n    \n                labels.push(['T' + term, year]);\n                gradeperterm.push(p.details.avggrades);\n    \n                grades.push(p.details.avggrades);\n                effort.push(p.details.avgeffort)\n                attendance.push(p.details.avgattendance)\n    \n            }\n    \n            sets.push({\n                label: TAGS.avggrades,\n                data: grades,\n                fill: false,\n                borderColor: '#31326f',\n                backgroundColor: '#31326f',\n                tension: 0.1,\n                spanGaps: true\n            });\n    \n            sets.push({\n                label: TAGS.avgeffort,\n                data: effort,\n                fill: false,\n                borderColor: '#ffc93c',\n                backgroundColor: '#ffc93c',\n                tension: 0.1,\n                spanGaps: true\n            });\n    \n            sets.push({\n                label: TAGS.avgattendance,\n                data: attendance,\n                fill: false,\n                borderColor: '#1687a7',\n                backgroundColor: '#1687a7',\n                tension: 0.1,\n                spanGaps: true\n            });\n    \n    \n            const data = {\n                labels: labels,\n                datasets: sets\n            };\n    \n            const options = {\n                responsive: true,\n                maintainAspectRatio: false,\n    \n            }\n    \n            // remove spinner\n            document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n    \n            new Chart(ctx, {\n                type: 'line',\n                data: data,\n                options: options,\n    \n            });\n        }\n\n    }\n\n    function trendChartPrimary(result) {\n        const ctx = document.getElementById(\"chart-academic\");\n        if (!ctx) {\n            return;\n        }\n\n        const performance = JSON.parse(result);\n\n        let labels = [];\n        let sets = [];\n        let attendance = [];\n        let effort = [];\n        let grades = [];\n\n        const TAGS = {\n            avgattendance: 'Average Attendance',\n            avgeffort: 'Average Effort',\n            avggrades: 'Average Grade',\n        }\n\n        const TAGS_EFFORTS_DESC = {\n            e: 'Excellent (E)',\n            vg: 'Very Good (VG)',\n            avg: 'Average (AVG)',\n            ni: 'Needs Improvement (NI)',\n        }\n\n        const TAGS_GRADES_DESC = {\n            be: 'Below Expectations',\n            gs: 'Good start (GS)',\n            ms: 'Making strides (MS)',\n            grwi: 'Go run with it (GRWI)',\n            ae: 'Above expectations'\n        }\n\n        for (let i = 0; i < performance.length; i++) {\n            var p = performance[i];\n\n            const year = p.details.year.toString();\n            const term = p.details.term.toString();\n\n            labels.push(['T' + term, year]);\n\n            if (p.details.avggrades == null) {\n                p.details.avggrades = undefined;\n            }\n            grades.push(p.details.avggrades);\n\n            if (p.details.effortaverage == null) {\n                p.details.effortaverage = undefined;\n            }\n            effort.push(p.details.effortaverage);\n\n            if (p.details.percentageattended == null) {\n                p.details.percentageattended = undefined;\n            }\n            attendance.push(p.details.percentageattended);\n\n        }\n\n        sets.push({\n            label: TAGS.avggrades,\n            data: grades,\n            fill: false,\n            borderColor: '#31326f',            \n            backgroundColor: '#31326f',\n            tension: 0.1,\n            spanGaps: true\n        });\n\n        sets.push({\n            label: TAGS.avgeffort,\n            data: effort,\n            fill: false,\n            borderColor: '#ffc93c',\n            backgroundColor: '#ffc93c',\n            tension: 0.1,\n            spanGaps: true\n        });\n\n        sets.push({\n            label: TAGS.avgattendance,\n            data: attendance,\n            fill: false,\n            borderColor: '#1687a7',\n            backgroundColor: '#1687a7',\n            tension: 0.1,\n            spanGaps: true\n        });\n\n        const data = {\n            labels: labels,\n            datasets: sets\n        };\n\n        const options = {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                tooltip: {\n                    callbacks: {\n                        label: function (context) {\n\n                            if (context.dataset.label == TAGS.avggrades) {\n\n                                if (context.parsed.y > 0.00 && context.parsed.y <= 20.00) {\n                                    return TAGS_GRADES_DESC.be;\n                                } else if (context.parsed.y > 20.00 && context.parsed.y <= 40.00) {\n                                    return TAGS_GRADES_DESC.gs\n                                } else if (context.parsed.y > 40.00 && context.parsed.y <= 60.00) {\n                                    return TAGS_GRADES_DESC.ms;\n                                } else if (context.parsed.y > 60.00 && context.parsed.y <= 80.00) {\n                                    return TAGS_GRADES_DESC.grwi;\n                                } else if (context.parsed.y > 80.00) {\n                                    return TAGS_GRADES_DESC.ae\n                                }\n                            }\n                            if (context.dataset.label == TAGS.avgeffort) {\n                                if (parseFloat(context.parsed.y) > 0.00 && parseFloat(context.parsed.y) <= 25.00) {\n                                    return TAGS_EFFORTS_DESC.ni;\n                                } else if (parseFloat(context.parsed.y) > 25.00 && parseFloat(context.parsed.y) <= 50.00) {\n                                    return TAGS_EFFORTS_DESC.avg\n                                } else if (parseFloat(context.parsed.y) > 50.00 && parseFloat(context.parsed.y) < 95.00) {\n                                    return TAGS_EFFORTS_DESC.vg;\n                                } else if (parseFloat(context.parsed.y) >= 95.00) {\n                                    return TAGS_EFFORTS_DESC.e;\n                                }\n                            } else {\n\n                                return context.parsed.y + \"%\";\n                            }\n                        }\n                    }\n                }\n            },\n            scales: {\n                y: {\n                    suggestedMin: 25,\n                    display: true,\n\n                }\n            }\n        }\n\n        /// remove spinner\n        document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n\n        new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: options,\n        });\n    }\n\n\n    function filterYear() {\n        // Declare variables\n\n        var input, filter, table, tr, td, i, txtValue;\n        input = document.getElementById(\"searchReportInput\");\n        filter = input.value.toUpperCase();\n        table = document.getElementById(\"reports-table\");\n        tr = table.getElementsByTagName(\"tr\");\n\n        // Loop through all table rows, and hide those who don't match the search query\n        for (i = 0; i < tr.length; i++) {\n            td = tr[i].getElementsByTagName(\"td\")[2];\n            if (td) {\n                txtValue = td.textContent || td.innerText;\n                const date = txtValue.split('/').pop()\n                if (date.toUpperCase().indexOf(filter) > -1) {\n                    tr[i].style.display = \"\";\n                } else {\n                    tr[i].style.display = \"none\";\n                }\n            }\n        }\n    }\n\n    function filterByClass(e) {\n        // Declare variables\n        var input, filter, table, tr, td, i, txtValue;\n        const inputid = e.target.id;\n        input = document.getElementById(inputid); //\"searchByClassInput searchByClassGradeInput\"\n        filter = input.value.toUpperCase();\n        table = inputid == \"searchByClassGradeInput\" ? document.getElementById(\"grade-history-table\") : document.getElementById(\"effort-history-table\");\n        tr = table.getElementsByTagName(\"tr\");\n\n        // Loop through all table rows, and hide those who don't match the search query\n        for (i = 1; i < tr.length; i++) {\n            var trclasslist = tr[i].classList;\n            if (trclasslist.contains('reports-heading') || trclasslist.contains('my-student-learning-title')) continue;\n            td = tr[i].getElementsByTagName(\"td\")[0];\n            if (td) {\n                txtValue = td.textContent || td.innerText;\n                if (txtValue.toUpperCase().indexOf(filter) > -1) {\n                    tr[i].style.display = \"\";\n                } else {\n                    tr[i].style.display = \"none\";\n                }\n            }\n        }\n    }\n\n    function displayReportService(e) {\n        \n        const tdocumentsseq = e.target.getAttribute('data-tdss');\n        Ajax.call([{\n            methodname: 'report_mystudent_get_student_academic_report',\n            args: {\n                tdocumentsseq: tdocumentsseq\n            },\n\n            done: function (response) {\n                const base64Data = JSON.parse(response.blob);\n                displayReport(base64Data);\n            },\n\n            fail: function (reason) {\n                Log.error('block_academic_report_get_student_report: Unable to get blob.');\n                Log.debug(reason);\n            }\n        }]);\n\n\n    };\n\n    async function displayReport(base64Data) {\n        const base64Response = await fetch(`data:application/pdf;base64,${base64Data}`);\n        const blob = await base64Response.blob();\n        var blobURL = URL.createObjectURL(blob);\n        window.open(blobURL);\n    }\n\n    function getGradeHistory() {\n\n        const element = document.querySelector('.cgs-dashboard-academic-info-container');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        // Add spinner.\n        $('#grade-history-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_grade_history',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                Log.debug(response);\n                const htmlResult = response.html;\n                $('#grade-history-tb').attr('hidden', true);\n                $('[data-region=\"grade-history-table\"]').replaceWith(htmlResult);\n                //enable expand button\n                $('.pop-up-effort').removeAttr('disabled');\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('#grade-history-tb').attr('hidden', true);\n                $('[data-region=\"grade-history-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n\n    }\n\n    function getEffortHistory() {\n\n        const element = document.querySelector('.cgs-dashboard-academic-info-container');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        // Add spinner.\n        $('#effort-history-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_effort_history',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                Log.debug(response);\n                const htmlResult = response.html;\n                $('#effort-history-tb').attr('hidden', true);\n                $('[data-region=\"effort-history-table\"]').replaceWith(htmlResult);\n                $('.pop-up-grade').removeAttr('disabled');\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('#effort-history-tb').attr('hidden', true);\n                $('[data-region=\"effort-history-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n    }\n\n    function getAssign() {\n        const element = document.querySelector('.cgs-dashboard-academic-info-container');\n        const username = element.getAttribute('data-username');\n\n        // Add spinner.\n        $('#assignment-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_assign_context',\n            args: {\n                username: username\n            },\n\n            done: function (response) {\n                const htmlResult = response.html;\n                $('#assignment-tb').attr('hidden', true);\n                $('[data-region=\"assignment-table\"]').replaceWith(htmlResult);\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('#assignment-tb').attr('hidden', true);\n                $('[data-region=\"assignment-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n\n    }\n\n\n    function popup(e) {\n        var container;\n        var modalcontainer;\n        //replace the icon\n        e.target.classList.remove('fa-external-link');\n        e.target.classList.add('fa-window-close');\n        e.target.setAttribute('title', 'Close');\n        Y.log(e);\n\n        if (e.target.classList.contains('pop-up-grade')) {\n            container = document.querySelector('.pop-up-grade').closest('div.cgs-grade-history-container');\n            modalcontainer = container.closest('div.cgs-grade-main-container');\n            document.getElementById('grade-history-table').closest('div.grades-his').classList.add('modal-history-content');\n            modalcontainer.classList.add('modal-history-background');\n            document.querySelector('.pop-up-grade.fa-window-close').addEventListener('click', closePopup);\n            document.querySelector('.pop-up-grade').removeEventListener('click', popup);\n\n\n        } else {\n            container = document.querySelector('.pop-up-effort').closest('div.cgs-effort-history-container');\n            modalcontainer = container.closest('div.cgs-effort-main-container');\n            document.getElementById('effort-history-table').closest('div.effort-his').classList.add('modal-history-content');\n            modalcontainer.classList.add('modal-history-background');\n            document.querySelector('.pop-up-effort.fa-window-close').addEventListener('click', closePopup);\n            document.querySelector('.pop-up-effort').removeEventListener('click', popup);\n        }\n    }\n\n    function closePopup(e) {\n        const gradepopup = e.target.classList.contains('pop-up-grade');\n        const modalcontentdiv = e.target.classList.contains('pop-up-grade') ? e.target.closest(\"div.grades-his\") : e.target.closest(\"div.effort-his\");\n        modalcontentdiv.classList.remove('modal-history-content');\n\n        if (gradepopup) {\n            (modalcontentdiv.closest('.cgs-grade-main-container')).classList.remove('modal-history-background');\n        } else {\n            (modalcontentdiv.closest('.cgs-effort-main-container')).classList.remove('modal-history-background');\n        }\n\n        // Add the listener for the close\n        e.target.classList.add('fa-external-link');\n        e.target.classList.remove('fa-window-close');\n        e.target.setAttribute('title', 'Expand');\n\n        document.querySelector('.pop-up-grade').removeEventListener('click', closePopup);\n        document.querySelector('.pop-up-effort').removeEventListener('click', closePopup);\n        document.querySelector('.pop-up-grade').addEventListener('click', popup);\n        document.querySelector('.pop-up-effort').addEventListener('click', popup);\n    }\n\n\n    // function popupfeedback(e) {\n    //     Y.log(\"popupfeedback\");\n    //     Y.log(e);\n    //     e.target.classList.remove('fa-external-link');\n    //     e.target.classList.add('fa-window-close');\n    //     e.target.setAttribute('title', 'Close');\n\n\n    //     const container = e.target.closest('div.feedbackcomment-modal');\n    //     const containerContact = e.target.closest('div.feedbackcomment-modal-content');\n\n    //     container.classList.add('modal-history-background');\n    //     containerContact.classList.add('modal-history-content');\n    //     containerContact.classList.add('feedbackcomment-modal-content-expanded');\n\n    //     e.target.removeEventListener('click', popupfeedback);\n    //     e.target.addEventListener('click', popupfeedbackclose);\n\n    // }\n\n    // function popupfeedbackclose(e) {\n    //     e.target.classList.add('fa-external-link');\n    //     e.target.classList.remove('fa-window-close');\n    //     e.target.setAttribute('title', 'Open');\n\n    //     const container = e.target.closest('div.feedbackcomment-modal');\n    //     const containerContact = e.target.closest('div.feedbackcomment-modal-content');\n\n\n    //     container.classList.remove('modal-history-background');\n    //     containerContact.classList.remove('modal-history-content');\n    //     containerContact.classList.remove('feedbackcomment-modal-content-expanded');\n\n\n    //     e.target.addEventListener('click', popupfeedback);\n    //     e.target.removeEventListener('click', popupfeedbackclose);\n    // }\n\n    return {\n        init: init\n    }\n});"],"names":["define","$","Log","Chart","Ajax","filterYear","filter","tr","td","i","document","getElementById","value","toUpperCase","getElementsByTagName","length","textContent","innerText","split","pop","indexOf","style","display","filterByClass","e","inputid","target","id","trclasslist","classList","contains","displayReportService","tdocumentsseq","getAttribute","call","methodname","args","done","response","displayReport","JSON","parse","blob","fail","reason","error","debug","base64Data","fetch","base64Response","blobURL","URL","createObjectURL","window","open","popup","modalcontainer","remove","add","setAttribute","Y","log","querySelector","closest","addEventListener","closePopup","removeEventListener","gradepopup","modalcontentdiv","init","origin","username","campus","firstElementChild","htmlResult","result","Object","keys","replaceWith","ctx","performance","labels","sets","attendance","effort","grades","gradeperterm","TAGS","avgattendance","avgeffort","avggrades","p","year","details","toString","term","push","label","data","fill","borderColor","backgroundColor","tension","spanGaps","datasets","options","responsive","maintainAspectRatio","type","trendChartSenior","TAGS_EFFORTS_DESC","vg","avg","ni","TAGS_GRADES_DESC","be","gs","ms","grwi","ae","undefined","effortaverage","percentageattended","plugins","tooltip","callbacks","context","dataset","parsed","y","parseFloat","scales","suggestedMin","trendChartPrimary","querySelectorAll","forEach","icon","element","removeAttr","html","attr","getEffortHistory","getAssign","getGradeHistory"],"mappings":";yEAqBAA;uCAAO,CAAC,SAAU,WAAY,yBAA0B,cAAc,SAAUC,EAAGC,IAAKC,MAAOC,eAqTlFC,iBAGMC,OAAeC,GAAIC,GAAIC,MAElCH,OADQI,SAASC,eAAe,qBACjBC,MAAMC,cAErBN,GADQG,SAASC,eAAe,iBACrBG,qBAAqB,MAG3BL,EAAI,EAAGA,EAAIF,GAAGQ,OAAQN,IAAK,IAC5BD,GAAKD,GAAGE,GAAGK,qBAAqB,MAAM,IAEvBN,GAAGQ,aAAeR,GAAGS,WACVC,MAAM,KAAKC,MACxBN,cAAcO,QAAQd,SAAW,EACtCC,GAAGE,GAAGY,MAAMC,QAAU,GAEtBf,GAAGE,GAAGY,MAAMC,QAAU,iBAM7BC,cAAcC,OAERlB,OAAeC,GAAIC,GAAIC,EAC5BgB,QAAUD,EAAEE,OAAOC,OAEzBrB,OADQI,SAASC,eAAec,SACjBb,MAAMC,cAErBN,IADmB,2BAAXkB,QAAuCf,SAASC,eAAe,uBAAyBD,SAASC,eAAe,yBAC7GG,qBAAqB,MAG3BL,EAAI,EAAGA,EAAIF,GAAGQ,OAAQN,IAAK,KACxBmB,YAAcrB,GAAGE,GAAGoB,UACpBD,YAAYE,SAAS,oBAAsBF,YAAYE,SAAS,+BACpEtB,GAAKD,GAAGE,GAAGK,qBAAqB,MAAM,OAEvBN,GAAGQ,aAAeR,GAAGS,WACnBJ,cAAcO,QAAQd,SAAW,EAC1CC,GAAGE,GAAGY,MAAMC,QAAU,GAEtBf,GAAGE,GAAGY,MAAMC,QAAU,kBAM7BS,qBAAqBP,OAEpBQ,cAAgBR,EAAEE,OAAOO,aAAa,aAC5C7B,KAAK8B,KAAK,CAAC,CACPC,WAAY,+CACZC,KAAM,CACFJ,cAAeA,eAGnBK,KAAM,SAAUC,6DAEZC,CADmBC,KAAKC,MAAMH,SAASI,QAI3CC,KAAM,SAAUC,QACZ1C,IAAI2C,MAAM,iEACV3C,IAAI4C,MAAMF,uGAOtB,iBAA6BG,wKACIC,4CAAqCD,2BAA5DE,6CACaA,eAAeP,cAA5BA,mBACFQ,QAAUC,IAAIC,gBAAgBV,MAClCW,OAAOC,KAAKJ,iGAyGPK,MAAM/B,OAEPgC,eAEJhC,EAAEE,OAAOG,UAAU4B,OAAO,oBAC1BjC,EAAEE,OAAOG,UAAU6B,IAAI,mBACvBlC,EAAEE,OAAOiC,aAAa,QAAS,SAC/BC,EAAEC,IAAIrC,GAEFA,EAAEE,OAAOG,UAAUC,SAAS,iBAE5B0B,eADY9C,SAASoD,cAAc,iBAAiBC,QAAQ,mCACjCA,QAAQ,gCACnCrD,SAASC,eAAe,uBAAuBoD,QAAQ,kBAAkBlC,UAAU6B,IAAI,yBACvFF,eAAe3B,UAAU6B,IAAI,4BAC7BhD,SAASoD,cAAc,iCAAiCE,iBAAiB,QAASC,YAClFvD,SAASoD,cAAc,iBAAiBI,oBAAoB,QAASX,SAKrEC,eADY9C,SAASoD,cAAc,kBAAkBC,QAAQ,oCAClCA,QAAQ,iCACnCrD,SAASC,eAAe,wBAAwBoD,QAAQ,kBAAkBlC,UAAU6B,IAAI,yBACxFF,eAAe3B,UAAU6B,IAAI,4BAC7BhD,SAASoD,cAAc,kCAAkCE,iBAAiB,QAASC,YACnFvD,SAASoD,cAAc,kBAAkBI,oBAAoB,QAASX,iBAIrEU,WAAWzC,OACV2C,WAAa3C,EAAEE,OAAOG,UAAUC,SAAS,gBACzCsC,gBAAkB5C,EAAEE,OAAOG,UAAUC,SAAS,gBAAkBN,EAAEE,OAAOqC,QAAQ,kBAAoBvC,EAAEE,OAAOqC,QAAQ,kBAC5HK,gBAAgBvC,UAAU4B,OAAO,yBAE7BU,WACCC,gBAAgBL,QAAQ,6BAA8BlC,UAAU4B,OAAO,4BAEvEW,gBAAgBL,QAAQ,8BAA+BlC,UAAU4B,OAAO,4BAI7EjC,EAAEE,OAAOG,UAAU6B,IAAI,oBACvBlC,EAAEE,OAAOG,UAAU4B,OAAO,mBAC1BjC,EAAEE,OAAOiC,aAAa,QAAS,UAE/BjD,SAASoD,cAAc,iBAAiBI,oBAAoB,QAASD,YACrEvD,SAASoD,cAAc,kBAAkBI,oBAAoB,QAASD,YACtEvD,SAASoD,cAAc,iBAAiBE,iBAAiB,QAAST,OAClE7C,SAASoD,cAAc,kBAAkBE,iBAAiB,QAAST,aA0ChE,CACHc,cAjkBUC,YAqBJC,SACAC,OArBQ,aAAVF,QAoBEC,SAAW7D,SAASoD,cAAc,mBAAmB7B,aAAa,iBAClEuC,OAAS9D,SAASoD,cAAc,iBAAiB7B,aAAa,eAEpEvB,SAASC,eAAe,WAAWU,MAAMC,QAAU,OACnDZ,SAASoD,cAAc,sBAAsBW,kBAAkBpD,MAAMC,QAAU,OAE/ElB,KAAK8B,KAAK,CAAC,CACPC,WAAY,0CACZC,KAAM,CACFmC,SAAUA,SACVC,OAAQA,QAGZnC,KAAM,SAAUC,cACNoC,WAAapC,SAASqC,OAC5BzE,IAAI4C,MAAM4B,YAEI,UAAVF,gBAiBUG,WACI,MAAVA,QAAiD,IAA/BC,OAAOC,KAAKF,QAAQ5D,OAElDL,SAASoD,cAAc,sBAAsBW,kBAAkBpD,MAAMC,QAAU,OAC/ErB,EAAE,iCAAiC6E,YAAY,2GAC5C,KAEGC,IAAMrE,SAASC,eAAe,sBAC/BoE,mBAICC,YAAcxC,KAAKC,MAAMkC,QAC3BM,OAAS,GACTC,KAAO,GACPC,WAAa,GACbC,OAAS,GACTC,OAAS,GACTC,aAAe,GAEbC,KAAO,CACTC,cAAe,qBACfC,UAAW,iBACXC,UAAW,iBAGNjF,EAAI,EAAGA,EAAIuE,YAAYjE,OAAQN,IAAK,KACrCkF,EAAIX,YAAYvE,GAEdmF,KAAOD,EAAEE,QAAQD,KAAKE,WACtBC,KAAOJ,EAAEE,QAAQE,KAAKD,WAE5Bb,OAAOe,KAAK,CAAC,IAAMD,KAAMH,OACzBN,aAAaU,KAAKL,EAAEE,QAAQH,WAE5BL,OAAOW,KAAKL,EAAEE,QAAQH,WACtBN,OAAOY,KAAKL,EAAEE,QAAQJ,WACtBN,WAAWa,KAAKL,EAAEE,QAAQL,eAI9BN,KAAKc,KAAK,CACNC,MAAOV,KAAKG,UACZQ,KAAMb,OACNc,MAAM,EACNC,YAAa,UACbC,gBAAiB,UACjBC,QAAS,GACTC,UAAU,IAGdrB,KAAKc,KAAK,CACNC,MAAOV,KAAKE,UACZS,KAAMd,OACNe,MAAM,EACNC,YAAa,UACbC,gBAAiB,UACjBC,QAAS,GACTC,UAAU,IAGdrB,KAAKc,KAAK,CACNC,MAAOV,KAAKC,cACZU,KAAMf,WACNgB,MAAM,EACNC,YAAa,UACbC,gBAAiB,UACjBC,QAAS,GACTC,UAAU,QAIRL,KAAO,CACTjB,OAAQA,OACRuB,SAAUtB,MAGRuB,QAAU,CACZC,YAAY,EACZC,qBAAqB,GAKzBjG,SAASoD,cAAc,sBAAsBW,kBAAkBpD,MAAMC,QAAU,WAE3EnB,MAAM4E,IAAK,CACX6B,KAAM,OACNV,KAAMA,KACNO,QAASA,WAzGLI,CAAiBnC,qBAgHNC,YACjBI,IAAMrE,SAASC,eAAe,qBAC/BoE,aAICC,YAAcxC,KAAKC,MAAMkC,QAE3BM,OAAS,GACTC,KAAO,GACPC,WAAa,GACbC,OAAS,GACTC,OAAS,GAEPE,KAAO,CACTC,cAAe,qBACfC,UAAW,iBACXC,UAAW,iBAGToB,kBAAoB,CACtBtF,EAAG,gBACHuF,GAAI,iBACJC,IAAK,gBACLC,GAAI,0BAGFC,iBAAmB,CACrBC,GAAI,qBACJC,GAAI,kBACJC,GAAI,sBACJC,KAAM,wBACNC,GAAI,sBAGC9G,EAAI,EAAGA,EAAIuE,YAAYjE,OAAQN,IAAK,KACrCkF,EAAIX,YAAYvE,GAEdmF,KAAOD,EAAEE,QAAQD,KAAKE,WACtBC,KAAOJ,EAAEE,QAAQE,KAAKD,WAE5Bb,OAAOe,KAAK,CAAC,IAAMD,KAAMH,OAEE,MAAvBD,EAAEE,QAAQH,YACVC,EAAEE,QAAQH,eAAY8B,GAE1BnC,OAAOW,KAAKL,EAAEE,QAAQH,WAES,MAA3BC,EAAEE,QAAQ4B,gBACV9B,EAAEE,QAAQ4B,mBAAgBD,GAE9BpC,OAAOY,KAAKL,EAAEE,QAAQ4B,eAEc,MAAhC9B,EAAEE,QAAQ6B,qBACV/B,EAAEE,QAAQ6B,wBAAqBF,GAEnCrC,WAAWa,KAAKL,EAAEE,QAAQ6B,oBAI9BxC,KAAKc,KAAK,CACNC,MAAOV,KAAKG,UACZQ,KAAMb,OACNc,MAAM,EACNC,YAAa,UACbC,gBAAiB,UACjBC,QAAS,GACTC,UAAU,IAGdrB,KAAKc,KAAK,CACNC,MAAOV,KAAKE,UACZS,KAAMd,OACNe,MAAM,EACNC,YAAa,UACbC,gBAAiB,UACjBC,QAAS,GACTC,UAAU,IAGdrB,KAAKc,KAAK,CACNC,MAAOV,KAAKC,cACZU,KAAMf,WACNgB,MAAM,EACNC,YAAa,UACbC,gBAAiB,UACjBC,QAAS,GACTC,UAAU,QAGRL,KAAO,CACTjB,OAAQA,OACRuB,SAAUtB,MAGRuB,QAAU,CACZC,YAAY,EACZC,qBAAqB,EACrBgB,QAAS,CACLC,QAAS,CACLC,UAAW,CACP5B,MAAO,SAAU6B,YAETA,QAAQC,QAAQ9B,OAASV,KAAKG,UAAW,IAErCoC,QAAQE,OAAOC,EAAI,GAAQH,QAAQE,OAAOC,GAAK,UACxCf,iBAAiBC,GACrB,GAAIW,QAAQE,OAAOC,EAAI,IAASH,QAAQE,OAAOC,GAAK,UAChDf,iBAAiBE,GACrB,GAAIU,QAAQE,OAAOC,EAAI,IAASH,QAAQE,OAAOC,GAAK,UAChDf,iBAAiBG,GACrB,GAAIS,QAAQE,OAAOC,EAAI,IAASH,QAAQE,OAAOC,GAAK,UAChDf,iBAAiBI,KACrB,GAAIQ,QAAQE,OAAOC,EAAI,UACnBf,iBAAiBK,UAG5BO,QAAQC,QAAQ9B,OAASV,KAAKE,UAYvBqC,QAAQE,OAAOC,EAAI,IAXtBC,WAAWJ,QAAQE,OAAOC,GAAK,GAAQC,WAAWJ,QAAQE,OAAOC,IAAM,GAChEnB,kBAAkBG,GAClBiB,WAAWJ,QAAQE,OAAOC,GAAK,IAASC,WAAWJ,QAAQE,OAAOC,IAAM,GACxEnB,kBAAkBE,IAClBkB,WAAWJ,QAAQE,OAAOC,GAAK,IAASC,WAAWJ,QAAQE,OAAOC,GAAK,GACvEnB,kBAAkBC,GAClBmB,WAAWJ,QAAQE,OAAOC,IAAM,GAChCnB,kBAAkBtF,OADtB,MAW3B2G,OAAQ,CACJF,EAAG,CACCG,aAAc,GACd9G,SAAS,KAOrBZ,SAASoD,cAAc,sBAAsBW,kBAAkBpD,MAAMC,QAAU,WAE3EnB,MAAM4E,IAAK,CACX6B,KAAM,OACNV,KAAMA,KACNO,QAASA,WApQD4B,CAAkB3D,aAI1B/B,KAAM,SAAUC,QACZ1C,IAAI4C,MAAMF,QAEVlC,SAASoD,cAAc,sBAAsBW,kBAAkBpD,MAAMC,QAAU,OAC/ErB,EAAE,iCAAiC6E,YAAY,8HA7CnDpE,SAASC,eAAe,qBAAqBqD,iBAAiB,QAAS3D,YACvEK,SAASC,eAAe,2BAA2BqD,iBAAiB,QAASzC,eAC7Eb,SAASC,eAAe,4BAA4BqD,iBAAiB,QAASzC,eAC9Eb,SAASoD,cAAc,iBAAiBE,iBAAiB,QAAST,OAClE7C,SAASoD,cAAc,kBAAkBE,iBAAiB,QAAST,OACnE7C,SAAS4H,iBAAiB,aAAaC,SAAQ,SAAUC,MACrDA,KAAKxE,iBAAiB,QAASjC,wCA6ZjC0G,QAAU/H,SAASoD,cAAc,0CACjCS,SAAWkE,QAAQxG,aAAa,iBAChCuC,OAASiE,QAAQxG,aAAa,eAEpChC,EAAE,sBAAsByI,WAAW,UAEnCtI,KAAK8B,KAAK,CAAC,CACPC,WAAY,sCACZC,KAAM,CACFmC,SAAUA,SACVC,OAAQA,QAGZnC,KAAM,SAAUC,UACZpC,IAAI4C,MAAMR,cACJoC,WAAapC,SAASqG,KAC5B1I,EAAE,sBAAsB2I,KAAK,UAAU,GACvC3I,EAAE,wCAAwC6E,YAAYJ,YACtDzE,EAAE,iBAAiByI,WAAW,aAIlC/F,KAAM,SAAUC,QACZ1C,IAAI2C,MAAM,4CACV3C,IAAI4C,MAAMF,QACV3C,EAAE,sBAAsB2I,KAAK,UAAU,GACvC3I,EAAE,wCAAwC6E,YAAY,8EApb1D+D,kBA4bEtE,SADU7D,SAASoD,cAAc,0CACd7B,aAAa,iBAGtChC,EAAE,kBAAkByI,WAAW,UAE/BtI,KAAK8B,KAAK,CAAC,CACPC,WAAY,sCACZC,KAAM,CACFmC,SAAUA,UAGdlC,KAAM,SAAUC,cACNoC,WAAapC,SAASqG,KAC5B1I,EAAE,kBAAkB2I,KAAK,UAAU,GACnC3I,EAAE,oCAAoC6E,YAAYJ,aAItD/B,KAAM,SAAUC,QACZ1C,IAAI2C,MAAM,4CACV3C,IAAI4C,MAAMF,QACV3C,EAAE,kBAAkB2I,KAAK,UAAU,GACnC3I,EAAE,oCAAoC6E,YAAY,8EAjdtDgE,kBAqXEL,QAAU/H,SAASoD,cAAc,0CACjCS,SAAWkE,QAAQxG,aAAa,iBAChCuC,OAASiE,QAAQxG,aAAa,eAEpChC,EAAE,qBAAqByI,WAAW,UAElCtI,KAAK8B,KAAK,CAAC,CACPC,WAAY,qCACZC,KAAM,CACFmC,SAAUA,SACVC,OAAQA,QAGZnC,KAAM,SAAUC,UACZpC,IAAI4C,MAAMR,cACJoC,WAAapC,SAASqG,KAC5B1I,EAAE,qBAAqB2I,KAAK,UAAU,GACtC3I,EAAE,uCAAuC6E,YAAYJ,YAErDzE,EAAE,kBAAkByI,WAAW,aAInC/F,KAAM,SAAUC,QACZ1C,IAAI2C,MAAM,4CACV3C,IAAI4C,MAAMF,QACV3C,EAAE,qBAAqB2I,KAAK,UAAU,GACtC3I,EAAE,uCAAuC6E,YAAY,8EA/YzDiE"}