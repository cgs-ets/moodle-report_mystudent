{"version":3,"sources":["../src/academicinfo.js"],"names":["define","$","Log","Chart","Ajax","getGradesEffortTrend","username","document","querySelector","getAttribute","campus","getElementById","style","display","firstElementChild","call","methodname","args","done","response","htmlResult","result","debug","trendChartSenior","trendChartPrimary","fail","reason","replaceWith","Y","log","isEmpty","Object","keys","length","ctx","performance","JSON","parse","labels","sets","attendance","effort","grades","gradeperterm","TAGS","avgattendance","avgeffort","avggrades","i","p","year","details","toString","term","push","label","data","fill","borderColor","backgroundColor","tension","type","datasets","options","responsive","maintainAspectRatio","TAGS_EFFORTS_DESC","e","vg","avg","ni","TAGS_GRADES_DESC","be","gs","ms","grwi","ae","segments","dataset","hasval","noval","segment","index","seg","getStartPoint","getEndPoint","filter","element","currindex","flag","effortaverage","percentageattended","skipped","value","p0","skip","p1","sgrades","seffort","sattendance","borderDash","plugins","tooltip","callbacks","context","parsed","y","parseFloat","scales","suggestedMin","id","beforeDraw","chart","canvas","getContext","save","globalCompositeOperation","fillStyle","fillRect","width","height","restore","filterYear","input","table","tr","td","txtValue","toUpperCase","getElementsByTagName","textContent","innerText","date","split","pop","indexOf","filterByClass","inputid","target","displayReportService","tdocumentsseq","base64Data","blob","displayReport","error","fetch","base64Response","blobURL","URL","createObjectURL","window","open","getGradeHistory","removeAttr","html","attr","getEffortHistory","getAssign","popup","container","modalcontainer","classList","remove","add","setAttribute","contains","closest","addEventListener","closePopup","removeEventListener","gradepopup","modalcontentdiv","init","origin","querySelectorAll","forEach","icon"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// /**\n//  * @package   report_mystudent\n//  * @copyright 2022 Veronica Bermegui\n//  * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n//  */\n\ndefine(['jquery', 'core/log', 'report_mystudent/chart', 'core/ajax'], function ($, Log, Chart, Ajax) {\n    'use strict';\n\n    function init(origin) {\n        if (origin == 'dashboard') {\n            getGradesEffortTrend();\n        } else { // Im in the view for this section.\n            document.getElementById(\"searchReportInput\").addEventListener('keyup', filterYear);\n            document.getElementById(\"searchByClassGradeInput\").addEventListener('keyup', filterByClass);\n            document.getElementById(\"searchByClassEffortInput\").addEventListener('keyup', filterByClass);\n            document.querySelector('.pop-up-grade').addEventListener('click', popup);\n            document.querySelector('.pop-up-effort').addEventListener('click', popup);\n            document.querySelectorAll('.file-pdf').forEach(function (icon) {\n                icon.addEventListener('click', displayReportService)\n            });\n           \n            getEffortHistory();\n            getAssign();\n            getGradeHistory(); // Takes the longest\n        }\n    }\n\n    function getGradesEffortTrend() {\n\n        const username = document.querySelector('[data-username]').getAttribute('data-username');\n        const campus = document.querySelector('[data-campus]').getAttribute('data-campus');\n\n        document.getElementById(\"overlay\").style.display = \"flex\";\n        document.querySelector('.card-img-academic').firstElementChild.style.display = \"flex\";\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_grade_effort_trend',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                const htmlResult = response.result;\n                Log.debug(htmlResult);\n               \n                if (campus == 'Senior') {\n                    trendChartSenior(htmlResult);\n                } else {\n                    trendChartPrimary(htmlResult);\n                }\n            },\n\n            fail: function (reason) {\n                Log.debug(reason);\n                // remove spinner\n                document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n                $('#card-body-academic-info-text').replaceWith('<p class=\"card-text alert alert-danger\" id =\"card-body-academic-info-text\" >Data not available. Please try later</p>');\n            }\n        }]);\n\n    };\n\n    function trendChartSenior(result) {\n        Y.log(\"RESULT\");\n        Y.log(result == null);\n        const isEmpty = result == null || Object.keys(result).length === 0;\n        if (isEmpty) {\n            document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n            $('#card-body-academic-info-text').replaceWith('<p class=\"card-text alert alert-danger\" id =\"card-body-academic-info-text\" >Data not available.</p>');\n        } else {\n\n            const ctx = document.getElementById(\"chart-academic\");\n            if (!ctx) {\n                return;\n            }\n    \n            const performance = JSON.parse(result);\n            let labels = [];\n            let sets = [];\n            let attendance = [];\n            let effort = [];\n            let grades = [];\n            let gradeperterm = [];\n    \n            const TAGS = {\n                avgattendance: 'Average Attendance',\n                avgeffort: 'Average Effort',\n                avggrades: 'Average Grade',\n            }\n    \n            for (let i = 0; i < performance.length; i++) {\n                var p = performance[i];\n    \n                const year = p.details.year.toString();\n                const term = p.details.term.toString();\n    \n                labels.push(['T' + term, year]);\n                gradeperterm.push(p.details.avggrades);\n    \n                grades.push(p.details.avggrades);\n                effort.push(p.details.avgeffort)\n                attendance.push(p.details.avgattendance)\n    \n            }\n    \n            sets.push({\n                label: TAGS.avggrades,\n                data: grades,\n                fill: false,\n                borderColor: '#31326f',\n                backgroundColor: '#31326f',\n                tension: 0.1,\n            });\n    \n            sets.push({\n                label: TAGS.avgeffort,\n                data: effort,\n                fill: false,\n                borderColor: '#ffc93c',\n                backgroundColor: '#ffc93c',\n                tension: 0.1\n            });\n    \n            sets.push({\n                label: TAGS.avgattendance,\n                data: attendance,\n                fill: false,\n                borderColor: '#1687a7',\n                backgroundColor: '#1687a7',\n                tension: 0.1\n            });\n    \n    \n            const data = {\n                labels: labels,\n                datasets: sets\n            };\n    \n            const options = {\n                responsive: true,\n                maintainAspectRatio: false,\n    \n            }\n    \n            // remove spinner\n            document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n    \n            var myLineChart = new Chart(ctx, {\n                type: 'line',\n                data: data,\n                options: options,\n    \n            });\n        }\n\n    }\n\n    function trendChartPrimary(result) {\n        const ctx = document.getElementById(\"chart-academic\");\n        if (!ctx) {\n            return;\n        }\n\n        const performance = JSON.parse(result);\n\n        let labels = [];\n        let sets = [];\n        let attendance = [];\n        let effort = [];\n        let grades = [];\n\n        const TAGS = {\n            avgattendance: 'Average Attendance',\n            avgeffort: 'Average Effort',\n            avggrades: 'Average Grade',\n        }\n\n        const TAGS_EFFORTS_DESC = {\n            e: 'Excellent (E)',\n            vg: 'Very Good (VG)',\n            avg: 'Average (AVG)',\n            ni: 'Needs Improvement (NI)',\n        }\n\n        const TAGS_GRADES_DESC = {\n            be: 'Below Expectations',\n            gs: 'Good start (GS)',\n            ms: 'Making strides (MS)',\n            grwi: 'Go run with it (GRWI)',\n            ae: 'Above expectations'\n        }\n\n        // Segment helpers\n        const segments = (dataset) => {\n            let hasval = [];\n            let noval = [];\n            let segment = [];\n\n            for (let i = 0; i < dataset.length; i++) {\n\n                if (dataset[i] == undefined) {\n                    noval.push(i);\n                } else {\n                    hasval.push(i);\n                }\n\n            }\n\n            for (const index of noval) {\n                if (index > 0 && index < (dataset.length - 1)) {\n                    const seg = [getStartPoint(dataset, index), getEndPoint(dataset, index)];\n                    segment.push(seg); //start-finish segment\n                }\n            }\n\n            segment = segment.filter(function (element) {\n                return element !== undefined;\n            });\n\n\n        };\n\n        const getEndPoint = (dataset, currindex) => {\n            let flag = true;\n            let i = ++currindex;\n            while (flag && i < dataset.length) {\n\n                if (dataset[i] != undefined) {\n                    flag = false;\n                } else {\n                    i++;\n                }\n\n            }\n\n            return dataset[i];\n\n        };\n\n        const getStartPoint = (dataset, currindex) => {\n            let flag = true;\n            let i = --currindex;\n\n            while (flag && i > 0) {\n                if (dataset[i] != undefined) {\n                    flag = false;\n                } else {\n                    i--;\n                }\n\n            }\n\n            return dataset[i];\n\n\n        }\n\n        for (let i = 0; i < performance.length; i++) {\n            var p = performance[i];\n\n            const year = p.details.year.toString();\n            const term = p.details.term.toString();\n\n            labels.push(['T' + term, year]);\n\n            if (p.details.avggrades == null) {\n                p.details.avggrades = undefined;\n            }\n            grades.push(p.details.avggrades);\n\n            if (p.details.effortaverage == null) {\n                p.details.effortaverage = undefined;\n            }\n            effort.push(p.details.effortaverage);\n\n            if (p.details.percentageattended == null) {\n                p.details.percentageattended = undefined;\n            }\n            attendance.push(p.details.percentageattended);\n\n        }\n\n        const skipped = (ctx, value) => ctx.p0.skip || ctx.p1.skip ? value : undefined;\n        // End Segment helpers\n\n        const sgrades = segments(grades);\n        const seffort = segments(effort);\n        const sattendance = segments(attendance);\n\n        sets.push({\n            label: TAGS.avggrades,\n            data: grades,\n            fill: false,\n            borderColor: '#31326f',\n            segment: {\n                borderDash: ctx => skipped(ctx, sgrades),\n            },\n            backgroundColor: '#31326f',\n            tension: 0.1,\n        });\n\n        sets.push({\n            label: TAGS.avgeffort,\n            data: effort,\n            fill: false,\n            borderColor: '#ffc93c',\n            segment: {\n                borderDash: ctx => skipped(ctx, seffort),\n            },\n            backgroundColor: '#ffc93c',\n            tension: 0.1\n        });\n\n        sets.push({\n            label: TAGS.avgattendance,\n            data: attendance,\n            fill: false,\n            borderColor: '#1687a7',\n            segment: {\n                borderDash: ctx => skipped(ctx, sattendance),\n            },\n            backgroundColor: '#1687a7',\n            tension: 0.1\n        });\n\n        const data = {\n            labels: labels,\n            datasets: sets\n        };\n\n        const options = {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                tooltip: {\n                    callbacks: {\n                        label: function (context) {\n\n                            if (context.dataset.label == TAGS.avggrades) {\n\n                                if (context.parsed.y > 0.00 && context.parsed.y <= 20.00) {\n                                    return TAGS_GRADES_DESC.be;\n                                } else if (context.parsed.y > 20.00 && context.parsed.y <= 40.00) {\n                                    return TAGS_GRADES_DESC.gs\n                                } else if (context.parsed.y > 40.00 && context.parsed.y <= 60.00) {\n                                    return TAGS_GRADES_DESC.ms;\n                                } else if (context.parsed.y > 60.00 && context.parsed.y <= 80.00) {\n                                    return TAGS_GRADES_DESC.grwi;\n                                } else if (context.parsed.y > 80.00) {\n                                    return TAGS_GRADES_DESC.ae\n                                }\n                            }\n                            if (context.dataset.label == TAGS.avgeffort) {\n                                if (parseFloat(context.parsed.y) > 0.00 && parseFloat(context.parsed.y) <= 25.00) {\n                                    return TAGS_EFFORTS_DESC.ni;\n                                } else if (parseFloat(context.parsed.y) > 25.00 && parseFloat(context.parsed.y) <= 50.00) {\n                                    return TAGS_EFFORTS_DESC.avg\n                                } else if (parseFloat(context.parsed.y) > 50.00 && parseFloat(context.parsed.y) < 95.00) {\n                                    return TAGS_EFFORTS_DESC.vg;\n                                } else if (parseFloat(context.parsed.y) >= 95.00) {\n                                    return TAGS_EFFORTS_DESC.e;\n                                }\n                            } else {\n\n                                return context.parsed.y + \"%\";\n                            }\n                        }\n                    }\n                }\n            },\n            scales: {\n                y: {\n                    suggestedMin: 25,\n                    display: false,\n\n                }\n            }\n        }\n\n        const plugin = {\n            id: 'custom_canvas_background_color',\n            beforeDraw: (chart) => {\n                const ctx = chart.canvas.getContext('2d');\n                ctx.save();\n                ctx.globalCompositeOperation = 'destination-over';\n                ctx.fillStyle = '#f6f5f5';\n                ctx.fillRect(0, 0, chart.width, chart.height);\n                ctx.restore();\n            }\n        };\n\n        // remove spinner\n        //document.getElementById('chart-academic').nextElementSibling.setAttribute('hidden', true);\n\n        var myLineChart = new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: options,\n            plugins: [plugin],\n\n        });\n    }\n\n    function filterYear() {\n        // Declare variables\n\n        var input, filter, table, tr, td, i, txtValue;\n        input = document.getElementById(\"searchReportInput\");\n        filter = input.value.toUpperCase();\n        table = document.getElementById(\"reports-table\");\n        tr = table.getElementsByTagName(\"tr\");\n\n        // Loop through all table rows, and hide those who don't match the search query\n        for (i = 0; i < tr.length; i++) {\n            td = tr[i].getElementsByTagName(\"td\")[2];\n            if (td) {\n                txtValue = td.textContent || td.innerText;\n                const date = txtValue.split('/').pop()\n                if (date.toUpperCase().indexOf(filter) > -1) {\n                    tr[i].style.display = \"\";\n                } else {\n                    tr[i].style.display = \"none\";\n                }\n            }\n        }\n    }\n\n    function filterByClass(e) {\n        // Declare variables\n        Y.log(e);\n\n        var input, filter, table, tr, td, i, txtValue;\n        const inputid = e.target.id;\n        input = document.getElementById(inputid); //\"searchByClassInput searchByClassGradeInput\"\n        filter = input.value.toUpperCase();\n        table = inputid == \"searchByClassGradeInput\" ? document.getElementById(\"grade-history-table\") : document.getElementById(\"effort-history-table\");\n        tr = table.getElementsByTagName(\"tr\");\n\n        // Loop through all table rows, and hide those who don't match the search query\n        for (i = 1; i < tr.length; i++) {\n            td = tr[i].getElementsByTagName(\"td\")[0];\n            if (td) {\n                txtValue = td.textContent || td.innerText;\n                // const date = txtValue.split('/').pop()\n                if (txtValue.toUpperCase().indexOf(filter) > -1) {\n                    tr[i].style.display = \"\";\n                } else {\n                    tr[i].style.display = \"none\";\n                }\n            }\n        }\n    }\n\n    function displayReportService(e) {\n        Y.log(e.target.getAttribute('data-tdss'));\n        const tdocumentsseq = e.target.getAttribute('data-tdss');\n        Ajax.call([{\n            methodname: 'report_mystudent_get_student_academic_report',\n            args: {\n                tdocumentsseq: tdocumentsseq\n            },\n\n            done: function (response) {\n                const base64Data = JSON.parse(response.blob);\n                displayReport(base64Data);\n            },\n\n            fail: function (reason) {\n                Log.error('block_academic_report_get_student_report: Unable to get blob.');\n                Log.debug(reason);\n            }\n        }]);\n\n\n    };\n\n    async function displayReport(base64Data) {\n        const base64Response = await fetch(`data:application/pdf;base64,${base64Data}`);\n        const blob = await base64Response.blob();\n        var blobURL = URL.createObjectURL(blob);\n        window.open(blobURL);\n    }\n\n    function getGradeHistory() {\n\n        const element = document.querySelector('.cgs-dashboard-academic-info-container');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        // Add spinner.\n        $('#grade-history-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_grade_history',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                Log.debug(response);\n                const htmlResult = response.html;\n                $('#grade-history-tb').attr('hidden', true);\n                $('[data-region=\"grade-history-table\"]').replaceWith(htmlResult);\n                //enable expand button\n                $('.pop-up-effort').removeAttr('disabled');\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('#grade-history-tb').attr('hidden', true);\n                $('[data-region=\"grade-history-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n\n    }\n\n    function getEffortHistory() {\n\n        const element = document.querySelector('.cgs-dashboard-academic-info-container');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        // Add spinner.\n        $('#effort-history-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_effort_history',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                Log.debug(response);\n                const htmlResult = response.html;\n                $('#effort-history-tb').attr('hidden', true);\n                $('[data-region=\"effort-history-table\"]').replaceWith(htmlResult);\n                $('.pop-up-grade').removeAttr('disabled');\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('#effort-history-tb').attr('hidden', true);\n                $('[data-region=\"effort-history-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n    }\n\n    function getAssign() {\n        const element = document.querySelector('.cgs-dashboard-academic-info-container');\n        const username = element.getAttribute('data-username');\n\n        // Add spinner.\n        $('#assignment-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_assign_context',\n            args: {\n                username: username\n            },\n\n            done: function (response) {\n                const htmlResult = response.html;\n                $('#assignment-tb').attr('hidden', true);\n                $('[data-region=\"assignment-table\"]').replaceWith(htmlResult);\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('#assignment-tb').attr('hidden', true);\n                $('[data-region=\"assignment-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n\n    }\n\n\n    function popup(e) {\n        var container;\n        var modalcontainer;\n        //replace the icon\n        e.target.classList.remove('fa-external-link');\n        e.target.classList.add('fa-window-close');\n        e.target.setAttribute('title', 'Close');\n        Y.log(e);\n\n        if (e.target.classList.contains('pop-up-grade')) {\n            container = document.querySelector('.pop-up-grade').closest('div.cgs-grade-history-container');\n            modalcontainer = container.closest('div.cgs-grade-main-container');\n            document.getElementById('grade-history-table').closest('div.grades-his').classList.add('modal-history-content');\n            modalcontainer.classList.add('modal-history-background');\n            document.querySelector('.pop-up-grade.fa-window-close').addEventListener('click', closePopup);\n            document.querySelector('.pop-up-grade').removeEventListener('click', popup);\n\n\n        } else {\n            container = document.querySelector('.pop-up-effort').closest('div.cgs-effort-history-container');\n            modalcontainer = container.closest('div.cgs-effort-main-container');\n            document.getElementById('effort-history-table').closest('div.effort-his').classList.add('modal-history-content');\n            modalcontainer.classList.add('modal-history-background');\n            document.querySelector('.pop-up-effort.fa-window-close').addEventListener('click', closePopup);\n            document.querySelector('.pop-up-effort').removeEventListener('click', popup);\n        }\n    }\n\n    function closePopup(e) {\n        const gradepopup = e.target.classList.contains('pop-up-grade');\n        const modalcontentdiv = e.target.classList.contains('pop-up-grade') ? e.target.closest(\"div.grades-his\") : e.target.closest(\"div.effort-his\");\n        modalcontentdiv.classList.remove('modal-history-content');\n\n        if (gradepopup) {\n            (modalcontentdiv.closest('.cgs-grade-main-container')).classList.remove('modal-history-background');\n        } else {\n            (modalcontentdiv.closest('.cgs-effort-main-container')).classList.remove('modal-history-background');\n        }\n\n        // Add the listener for the close\n        e.target.classList.add('fa-external-link');\n        e.target.classList.remove('fa-window-close');\n        e.target.setAttribute('title', 'Expand');\n\n        document.querySelector('.pop-up-grade').removeEventListener('click', closePopup);\n        document.querySelector('.pop-up-effort').removeEventListener('click', closePopup);\n        document.querySelector('.pop-up-grade').addEventListener('click', popup);\n        document.querySelector('.pop-up-effort').addEventListener('click', popup);\n    }\n\n\n    // function popupfeedback(e) {\n    //     Y.log(\"popupfeedback\");\n    //     Y.log(e);\n    //     e.target.classList.remove('fa-external-link');\n    //     e.target.classList.add('fa-window-close');\n    //     e.target.setAttribute('title', 'Close');\n\n\n    //     const container = e.target.closest('div.feedbackcomment-modal');\n    //     const containerContact = e.target.closest('div.feedbackcomment-modal-content');\n\n    //     container.classList.add('modal-history-background');\n    //     containerContact.classList.add('modal-history-content');\n    //     containerContact.classList.add('feedbackcomment-modal-content-expanded');\n\n    //     e.target.removeEventListener('click', popupfeedback);\n    //     e.target.addEventListener('click', popupfeedbackclose);\n\n    // }\n\n    // function popupfeedbackclose(e) {\n    //     e.target.classList.add('fa-external-link');\n    //     e.target.classList.remove('fa-window-close');\n    //     e.target.setAttribute('title', 'Open');\n\n    //     const container = e.target.closest('div.feedbackcomment-modal');\n    //     const containerContact = e.target.closest('div.feedbackcomment-modal-content');\n\n\n    //     container.classList.remove('modal-history-background');\n    //     containerContact.classList.remove('modal-history-content');\n    //     containerContact.classList.remove('feedbackcomment-modal-content-expanded');\n\n\n    //     e.target.addEventListener('click', popupfeedback);\n    //     e.target.removeEventListener('click', popupfeedbackclose);\n    // }\n\n    return {\n        init: init\n    }\n});"],"file":"academicinfo.min.js"}