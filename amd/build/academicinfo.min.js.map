{"version":3,"sources":["../src/academicinfo.js"],"names":["define","$","Log","Chart","Ajax","getGradesEffortTrend","username","document","querySelector","getAttribute","campus","getElementById","style","display","firstElementChild","call","methodname","args","done","response","htmlResult","result","debug","trendChartSenior","trendChartPrimary","fail","reason","ctx","performance","JSON","parse","labels","sets","attendance","effort","grades","gradeperterm","TAGS","avgattendance","avgeffort","avggrades","i","length","p","year","details","toString","term","push","label","data","fill","borderColor","backgroundColor","tension","type","datasets","options","responsive","maintainAspectRatio","TAGS_EFFORTS_DESC","e","vg","avg","ni","TAGS_GRADES_DESC","be","gs","ms","grwi","ae","segments","dataset","hasval","noval","segment","index","seg","getStartPoint","getEndPoint","filter","element","currindex","flag","effortaverage","percentageattended","skipped","value","p0","skip","p1","sgrades","seffort","sattendance","borderDash","plugins","tooltip","callbacks","context","parsed","y","parseFloat","scales","suggestedMin","id","beforeDraw","chart","canvas","getContext","save","globalCompositeOperation","fillStyle","fillRect","width","height","restore","filterYear","input","table","tr","td","txtValue","toUpperCase","getElementsByTagName","textContent","innerText","date","split","pop","indexOf","filterByClass","Y","log","inputid","target","displayReportService","tdocumentsseq","base64Data","blob","displayReport","error","fetch","base64Response","blobURL","URL","createObjectURL","window","open","getGradeHistory","removeAttr","html","attr","replaceWith","getEffortHistory","popup","container","modalcontainer","classList","remove","add","setAttribute","contains","closest","addEventListener","closePopup","removeEventListener","gradepopup","modalcontentdiv","init","origin","querySelectorAll","forEach","icon"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// /**\n//  * @package   report_mystudent\n//  * @copyright 2022 Veronica Bermegui\n//  * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n//  */\n\ndefine(['jquery', 'core/log', 'report_mystudent/chart', 'core/ajax'], function ($, Log, Chart, Ajax) {\n    'use strict';\n\n    function init(origin) {\n        if (origin == 'dashboard') {\n            getGradesEffortTrend();\n        } else { // Im in the view for this section.\n            document.getElementById(\"searchReportInput\").addEventListener('keyup', filterYear);\n            document.getElementById(\"searchByClassGradeInput\").addEventListener('keyup', filterByClass);\n            document.getElementById(\"searchByClassEffortInput\").addEventListener('keyup', filterByClass);\n            document.querySelector('.pop-up-grade').addEventListener('click', popup);\n            document.querySelector('.pop-up-effort').addEventListener('click', popup);\n            //  document.querySelector('.file-pdf').addEventListener('click', displayReportService);\n            document.querySelectorAll('.file-pdf').forEach(function (icon) {\n                icon.addEventListener('click', displayReportService)\n            });\n            getGradeHistory();\n            getEffortHistory();\n\n            // Close the modal if clicked outside of the backdrop/\n            // window.onclick = function (event) {\n            //     var modal = document.querySelector('.pop-up-grade');\n            //     if (event.target == modal) {\n            //         modal.style.display = \"none\";\n            //     }\n            //     var modal = document.querySelector('.pop-up-effort');\n            //     if (event.target == modal) {\n            //         modal.style.display = \"none\";\n            //     }\n            // }\n        }\n    }\n\n    function getGradesEffortTrend() {\n\n        const username = document.querySelector('[data-username]').getAttribute('data-username');\n        const campus = document.querySelector('[data-campus]').getAttribute('data-campus');\n\n        // document.getElementById('chart-academic').nextElementSibling.removeAttribute('hidden');\n        document.getElementById(\"overlay\").style.display = \"flex\";\n        //document.querySelector('.card-body-academic-info').firstElementChild.style.display = \"flex\";\n        // document.querySelector('.card-img-attendance').firstElementChild.style.display = \"flex\";\n        document.querySelector('.card-img-academic').firstElementChild.style.display = \"flex\";\n\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_grade_effort_trend',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                const htmlResult = response.result;\n                Log.debug(htmlResult);\n\n                if (campus == 'Senior') {\n                    trendChartSenior(htmlResult);\n                } else {\n                    trendChartPrimary(htmlResult);\n                }\n            },\n\n            fail: function (reason) {\n                Log.debug(reason);\n                // remove spinner\n                //document.querySelector('.card-body-academic-info').firstElementChild.style.display = \"none\";\n                document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n            }\n        }]);\n\n    };\n\n    function trendChartSenior(result) {\n        const ctx = document.getElementById(\"chart-academic\");\n        if (!ctx) {\n            return;\n        }\n\n        const performance = JSON.parse(result);\n        let labels = [];\n        let sets = [];\n        let attendance = [];\n        let effort = [];\n        let grades = [];\n        let gradeperterm = [];\n\n        const TAGS = {\n            avgattendance: 'Average Attendance',\n            avgeffort: 'Average Effort',\n            avggrades: 'Average Grade',\n        }\n\n        for (let i = 0; i < performance.length; i++) {\n            var p = performance[i];\n\n            const year = p.details.year.toString();\n            const term = p.details.term.toString();\n\n            labels.push(['T' + term, year]);\n            gradeperterm.push(p.details.avggrades);\n\n            grades.push(p.details.avggrades);\n            effort.push(p.details.avgeffort)\n            attendance.push(p.details.avgattendance)\n\n        }\n\n        sets.push({\n            label: TAGS.avggrades,\n            data: grades,\n            fill: false,\n            borderColor: '#31326f',\n            backgroundColor: '#31326f',\n            tension: 0.1,\n        });\n\n        sets.push({\n            label: TAGS.avgeffort,\n            data: effort,\n            fill: false,\n            borderColor: '#ffc93c',\n            backgroundColor: '#ffc93c',\n            tension: 0.1\n        });\n\n        sets.push({\n            label: TAGS.avgattendance,\n            data: attendance,\n            fill: false,\n            borderColor: '#1687a7',\n            backgroundColor: '#1687a7',\n            tension: 0.1\n        });\n\n\n        const data = {\n            labels: labels,\n            datasets: sets\n        };\n\n        const options = {\n            responsive: true,\n            maintainAspectRatio: false,\n\n        }\n\n        // remove spinner\n        // document.querySelector('.card-body-academic-info').firstElementChild.style.display = \"none\";\n        document.querySelector('.card-img-academic').firstElementChild.style.display = \"none\";\n\n        var myLineChart = new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: options,\n\n        });\n    }\n\n    function trendChartPrimary(result) {\n        const ctx = document.getElementById(\"chart-academic\");\n        if (!ctx) {\n            return;\n        }\n\n        const performance = JSON.parse(result);\n\n        let labels = [];\n        let sets = [];\n        let attendance = [];\n        let effort = [];\n        let grades = [];\n\n        const TAGS = {\n            avgattendance: 'Average Attendance',\n            avgeffort: 'Average Effort',\n            avggrades: 'Average Grade',\n        }\n\n        const TAGS_EFFORTS_DESC = {\n            e: 'Excellent (E)',\n            vg: 'Very Good (VG)',\n            avg: 'Average (AVG)',\n            ni: 'Needs Improvement (NI)',\n        }\n\n        const TAGS_GRADES_DESC = {\n            be: 'Below Expectations',\n            gs: 'Good start (GS)',\n            ms: 'Making strides (MS)',\n            grwi: 'Go run with it (GRWI)',\n            ae: 'Above expectations'\n        }\n\n        // Segment helpers\n        const segments = (dataset) => {\n            let hasval = [];\n            let noval = [];\n            let segment = [];\n\n            for (let i = 0; i < dataset.length; i++) {\n\n                if (dataset[i] == undefined) {\n                    noval.push(i);\n                } else {\n                    hasval.push(i);\n                }\n\n            }\n\n            for (const index of noval) {\n                if (index > 0 && index < (dataset.length - 1)) {\n                    const seg = [getStartPoint(dataset, index), getEndPoint(dataset, index)];\n                    segment.push(seg); //start-finish segment\n                }\n            }\n\n            segment = segment.filter(function (element) {\n                return element !== undefined;\n            });\n\n\n        };\n\n        const getEndPoint = (dataset, currindex) => {\n            let flag = true;\n            let i = ++currindex;\n            while (flag && i < dataset.length) {\n\n                if (dataset[i] != undefined) {\n                    flag = false;\n                } else {\n                    i++;\n                }\n\n            }\n\n            return dataset[i];\n\n        };\n\n        const getStartPoint = (dataset, currindex) => {\n            let flag = true;\n            let i = --currindex;\n\n            while (flag && i > 0) {\n                if (dataset[i] != undefined) {\n                    flag = false;\n                } else {\n                    i--;\n                }\n\n            }\n\n            return dataset[i];\n\n\n        }\n\n        for (let i = 0; i < performance.length; i++) {\n            var p = performance[i];\n\n            const year = p.details.year.toString();\n            const term = p.details.term.toString();\n\n            labels.push(['T' + term, year]);\n\n            if (p.details.avggrades == null) {\n                p.details.avggrades = undefined;\n            }\n            grades.push(p.details.avggrades);\n\n            if (p.details.effortaverage == null) {\n                p.details.effortaverage = undefined;\n            }\n            effort.push(p.details.effortaverage);\n\n            if (p.details.percentageattended == null) {\n                p.details.percentageattended = undefined;\n            }\n            attendance.push(p.details.percentageattended);\n\n        }\n\n        const skipped = (ctx, value) => ctx.p0.skip || ctx.p1.skip ? value : undefined;\n        // End Segment helpers\n\n        const sgrades = segments(grades);\n        const seffort = segments(effort);\n        const sattendance = segments(attendance);\n\n        sets.push({\n            label: TAGS.avggrades,\n            data: grades,\n            fill: false,\n            borderColor: '#31326f',\n            segment: {\n                borderDash: ctx => skipped(ctx, sgrades),\n            },\n            backgroundColor: '#31326f',\n            tension: 0.1,\n        });\n\n        sets.push({\n            label: TAGS.avgeffort,\n            data: effort,\n            fill: false,\n            borderColor: '#ffc93c',\n            segment: {\n                borderDash: ctx => skipped(ctx, seffort),\n            },\n            backgroundColor: '#ffc93c',\n            tension: 0.1\n        });\n\n        sets.push({\n            label: TAGS.avgattendance,\n            data: attendance,\n            fill: false,\n            borderColor: '#1687a7',\n            segment: {\n                borderDash: ctx => skipped(ctx, sattendance),\n            },\n            backgroundColor: '#1687a7',\n            tension: 0.1\n        });\n\n        const data = {\n            labels: labels,\n            datasets: sets\n        };\n\n        const options = {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                tooltip: {\n                    callbacks: {\n                        label: function (context) {\n\n                            if (context.dataset.label == TAGS.avggrades) {\n\n                                if (context.parsed.y > 0.00 && context.parsed.y <= 20.00) {\n                                    return TAGS_GRADES_DESC.be;\n                                } else if (context.parsed.y > 20.00 && context.parsed.y <= 40.00) {\n                                    return TAGS_GRADES_DESC.gs\n                                } else if (context.parsed.y > 40.00 && context.parsed.y <= 60.00) {\n                                    return TAGS_GRADES_DESC.ms;\n                                } else if (context.parsed.y > 60.00 && context.parsed.y <= 80.00) {\n                                    return TAGS_GRADES_DESC.grwi;\n                                } else if (context.parsed.y > 80.00) {\n                                    return TAGS_GRADES_DESC.ae\n                                }\n                            }\n                            if (context.dataset.label == TAGS.avgeffort) {\n                                if (parseFloat(context.parsed.y) > 0.00 && parseFloat(context.parsed.y) <= 25.00) {\n                                    return TAGS_EFFORTS_DESC.ni;\n                                } else if (parseFloat(context.parsed.y) > 25.00 && parseFloat(context.parsed.y) <= 50.00) {\n                                    return TAGS_EFFORTS_DESC.avg\n                                } else if (parseFloat(context.parsed.y) > 50.00 && parseFloat(context.parsed.y) < 95.00) {\n                                    return TAGS_EFFORTS_DESC.vg;\n                                } else if (parseFloat(context.parsed.y) >= 95.00) {\n                                    return TAGS_EFFORTS_DESC.e;\n                                }\n                            } else {\n\n                                return context.parsed.y + \"%\";\n                            }\n                        }\n                    }\n                }\n            },\n            scales: {\n                y: {\n                    suggestedMin: 25,\n                    display: false,\n\n                }\n            }\n        }\n\n        const plugin = {\n            id: 'custom_canvas_background_color',\n            beforeDraw: (chart) => {\n                const ctx = chart.canvas.getContext('2d');\n                ctx.save();\n                ctx.globalCompositeOperation = 'destination-over';\n                ctx.fillStyle = '#f6f5f5';\n                ctx.fillRect(0, 0, chart.width, chart.height);\n                ctx.restore();\n            }\n        };\n\n        // remove spinner\n        //document.getElementById('chart-academic').nextElementSibling.setAttribute('hidden', true);\n\n        var myLineChart = new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: options,\n            plugins: [plugin],\n\n        });\n    }\n\n    function filterYear() {\n        // Declare variables\n\n        var input, filter, table, tr, td, i, txtValue;\n        input = document.getElementById(\"searchReportInput\");\n        filter = input.value.toUpperCase();\n        table = document.getElementById(\"reports-table\");\n        tr = table.getElementsByTagName(\"tr\");\n\n        // Loop through all table rows, and hide those who don't match the search query\n        for (i = 0; i < tr.length; i++) {\n            td = tr[i].getElementsByTagName(\"td\")[2];\n            if (td) {\n                txtValue = td.textContent || td.innerText;\n                const date = txtValue.split('/').pop()\n                if (date.toUpperCase().indexOf(filter) > -1) {\n                    tr[i].style.display = \"\";\n                } else {\n                    tr[i].style.display = \"none\";\n                }\n            }\n        }\n    }\n\n    function filterByClass(e) {\n        // Declare variables\n        Y.log(e);\n\n        var input, filter, table, tr, td, i, txtValue;\n        const inputid = e.target.id;\n        input = document.getElementById(inputid); //\"searchByClassInput searchByClassGradeInput\"\n        filter = input.value.toUpperCase();\n        table = inputid == \"searchByClassGradeInput\" ? document.getElementById(\"grade-history-table\") : document.getElementById(\"effort-history-table\");\n        tr = table.getElementsByTagName(\"tr\");\n\n        // Loop through all table rows, and hide those who don't match the search query\n        for (i = 1; i < tr.length; i++) {\n            td = tr[i].getElementsByTagName(\"td\")[0];\n            if (td) {\n                txtValue = td.textContent || td.innerText;\n                // const date = txtValue.split('/').pop()\n                if (txtValue.toUpperCase().indexOf(filter) > -1) {\n                    tr[i].style.display = \"\";\n                } else {\n                    tr[i].style.display = \"none\";\n                }\n            }\n        }\n    }\n\n    function displayReportService(e) {\n        Y.log(e.target.getAttribute('data-tdss'));\n        const tdocumentsseq = e.target.getAttribute('data-tdss');\n        Ajax.call([{\n            methodname: 'report_mystudent_get_student_academic_report',\n            args: {\n                tdocumentsseq: tdocumentsseq\n            },\n\n            done: function (response) {\n                const base64Data = JSON.parse(response.blob);\n                displayReport(base64Data);\n            },\n\n            fail: function (reason) {\n                Log.error('block_academic_report_get_student_report: Unable to get blob.');\n                Log.debug(reason);\n            }\n        }]);\n\n\n    };\n\n    async function displayReport(base64Data) {\n        const base64Response = await fetch(`data:application/pdf;base64,${base64Data}`);\n        const blob = await base64Response.blob();\n        var blobURL = URL.createObjectURL(blob);\n        window.open(blobURL);\n    }\n\n    function getGradeHistory() {\n\n        const element = document.querySelector('.cgs-dashboard-academic-info-container');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        // Add spinner.\n        $('#grade-history-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_grade_history',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                Log.debug(response);\n                const htmlResult = response.html;\n                $('#grade-history-tb').attr('hidden', true);\n                $('[data-region=\"grade-history-table\"]').replaceWith(htmlResult);\n                //enable expand button\n                $('.pop-up-effort').removeAttr('disabled');\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('#grade-history-tb').attr('hidden', true);\n                $('[data-region=\"grade-history-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n\n    }\n\n    function getEffortHistory() {\n\n        const element = document.querySelector('.cgs-dashboard-academic-info-container');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        // Add spinner.\n        $('#effort-history-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_effort_history',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                Log.debug(response);\n                const htmlResult = response.html;\n                $('#effort-history-tb').attr('hidden', true);\n                $('[data-region=\"effort-history-table\"]').replaceWith(htmlResult);\n                $('.pop-up-grade').removeAttr('disabled');\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('#effort-history-tb').attr('hidden', true);\n                $('[data-region=\"effort-history-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n    }\n\n    function popup(e) {\n        var container;\n        var modalcontainer;\n        //replace the icon\n        e.target.classList.remove('fa-external-link');\n        e.target.classList.add('fa-window-close');\n        e.target.setAttribute('title', 'Close');\n        Y.log(e);\n\n        if (e.target.classList.contains('pop-up-grade')) {\n            container = document.querySelector('.pop-up-grade').closest('div.cgs-grade-history-container');\n            modalcontainer = container.closest('div.cgs-grade-main-container');\n            document.getElementById('grade-history-table').closest('div.grades-his').classList.add('modal-history-content');\n            modalcontainer.classList.add('modal-history-background');\n            document.querySelector('.pop-up-grade.fa-window-close').addEventListener('click', closePopup);\n            document.querySelector('.pop-up-grade').removeEventListener('click', popup);\n\n\n        } else {\n            container = document.querySelector('.pop-up-effort').closest('div.cgs-effort-history-container');\n            modalcontainer = container.closest('div.cgs-effort-main-container');\n            document.getElementById('effort-history-table').closest('div.effort-his').classList.add('modal-history-content');\n            modalcontainer.classList.add('modal-history-background');\n            document.querySelector('.pop-up-effort.fa-window-close').addEventListener('click', closePopup);\n            document.querySelector('.pop-up-effort').removeEventListener('click', popup);\n        }\n\n\n\n    }\n\n    function closePopup(e) {\n        const gradepopup = e.target.classList.contains('pop-up-grade');\n        const modalcontentdiv = e.target.classList.contains('pop-up-grade') ? e.target.closest(\"div.grades-his\") : e.target.closest(\"div.effort-his\");\n        modalcontentdiv.classList.remove('modal-history-content');\n\n        if (gradepopup) {\n            (modalcontentdiv.closest('.cgs-grade-main-container')).classList.remove('modal-history-background');\n        } else {\n            (modalcontentdiv.closest('.cgs-effort-main-container')).classList.remove('modal-history-background');\n        }\n\n        // Add the listener for the close\n        e.target.classList.add('fa-external-link');\n        e.target.classList.remove('fa-window-close');\n        e.target.setAttribute('title', 'Expand');\n\n        document.querySelector('.pop-up-grade').removeEventListener('click', closePopup);\n        document.querySelector('.pop-up-effort').removeEventListener('click', closePopup);\n        document.querySelector('.pop-up-grade').addEventListener('click', popup);\n        document.querySelector('.pop-up-effort').addEventListener('click', popup);\n    }\n\n    return {\n        init: init\n    }\n});"],"file":"academicinfo.min.js"}