{"version":3,"sources":["../src/gradesandeffort.js"],"names":["define","$","Ajax","Log","Chart","AcademicInfo","prototype","main","self","campus","document","querySelector","getAttribute","trendChartSenior","getGradeHistory","getEffortHistory","trendChartPrimary","ctx","getElementById","performanceEl","performance","JSON","parse","dataset","labels","sets","attendance","effort","grades","gradeperterm","TAGS","avgattendance","avgeffort","avggrades","i","length","p","year","details","toString","term","push","label","data","fill","borderColor","backgroundColor","tension","type","datasets","options","responsive","maintainAspectRatio","plugins","id","beforeDraw","chart","canvas","getContext","save","globalCompositeOperation","fillStyle","fillRect","width","height","restore","TAGS_EFFORTS_DESC","e","vg","avg","ni","TAGS_GRADES_DESC","be","gs","ms","grwi","ae","segments","hasval","noval","segment","index","seg","getStartPoint","getEndPoint","filter","element","currindex","flag","effortaverage","percentageattended","skipped","value","p0","skip","p1","sgrades","seffort","sattendance","borderDash","tooltip","callbacks","context","parsed","y","parseFloat","scales","suggestedMin","display","username","removeAttr","call","methodname","args","done","response","debug","htmlResult","html","attr","replaceWith","fail","reason","error","init","control"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package   report_mystudent\n * @copyright 2022 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/log', 'report_mystudent/chart'], function ($, Ajax, Log, Chart) {\n    'use strict';\n\n    function init() {\n\n        var control = new AcademicInfo();\n        control.main();\n    }\n\n    /**\n     * AcademicInfo a single report_mystudent block instance contents.\n     *\n     * @constructor\n     */\n    function AcademicInfo() {\n     \n    }\n\n\n    /**\n     * Run the controller.\n     *\n     */\n    AcademicInfo.prototype.main = function () {\n        let self = this;\n      \n        const campus = document.querySelector('[data-username]').getAttribute('data-campus'); \n        if (campus == \"Senior\") {\n            self.trendChartSenior();\n            self.getGradeHistory();\n            self.getEffortHistory();\n        } else {\n            self.trendChartPrimary();\n        }\n\n    };\n\n\n\n\n    AcademicInfo.prototype.trendChartSenior = function () {\n\n        const ctx = document.getElementById(\"trendChart\");\n        if (!ctx) {\n            return;\n        }\n        const performanceEl = document.querySelector(\"#performance\");\n        const performance = JSON.parse(performanceEl.dataset.performance);\n\n        let labels = [];\n        let sets = [];\n        let attendance = [];\n        let effort = [];\n        let grades = [];\n        let gradeperterm = [];\n\n        const TAGS = {\n            avgattendance: 'Average Attendance',\n            avgeffort: 'Average Effort',\n            avggrades: 'Average Grade',\n        }\n\n        for (let i = 0; i < performance.length; i++) {\n            var p = performance[i];\n\n            const year = p.details.year.toString();\n            const term = p.details.term.toString();\n\n            labels.push(['T' + term, year]);\n            gradeperterm.push(p.details.avggrades);\n\n            grades.push(p.details.avggrades);\n            effort.push(p.details.avgeffort)\n            attendance.push(p.details.avgattendance)\n\n        }\n\n        sets.push({\n            label: TAGS.avggrades,\n            data: grades,\n            fill: false,\n            borderColor: '#31326f',\n            backgroundColor: '#31326f',\n            tension: 0.1,\n        });\n\n        sets.push({\n            label: TAGS.avgeffort,\n            data: effort,\n            fill: false,\n            borderColor: '#ffc93c',\n            backgroundColor: '#ffc93c',\n            tension: 0.1\n        });\n\n        sets.push({\n            label: TAGS.avgattendance,\n            data: attendance,\n            fill: false,\n            borderColor: '#1687a7',\n            backgroundColor: '#1687a7',\n            tension: 0.1\n        });\n\n        const data = {\n            labels: labels,\n            datasets: sets\n        };\n\n        const options = {\n            responsive: true,\n            maintainAspectRatio: false,\n\n        }\n\n        const plugin = {\n            id: 'custom_canvas_background_color',\n            beforeDraw: (chart) => {\n                const ctx = chart.canvas.getContext('2d');\n                ctx.save();\n                ctx.globalCompositeOperation = 'destination-over';\n                ctx.fillStyle = '#f6f5f5';\n                ctx.fillRect(0, 0, chart.width, chart.height);\n                ctx.restore();\n            }\n        };\n\n        new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: options,\n            plugins: [plugin],\n\n        });\n\n    };\n\n    AcademicInfo.prototype.trendChartPrimary = function () {\n        const ctx = document.getElementById(\"trendChart\");\n        if (!ctx) {\n            return;\n        }\n\n        const performanceEl = document.querySelector(\"#performance\");\n        const performance = JSON.parse(performanceEl.dataset.performance);\n\n        let labels = [];\n        let sets = [];\n        let attendance = [];\n        let effort = [];\n        let grades = [];\n\n        const TAGS = {\n            avgattendance: 'Average Attendance',\n            avgeffort: 'Average Effort',\n            avggrades: 'Average Grade',\n        }\n\n        const TAGS_EFFORTS_DESC = {\n            e: 'Excellent (E)',\n            vg: 'Very Good (VG)',\n            avg: 'Average (AVG)',\n            ni: 'Needs Improvement (NI)',\n        }\n\n        const TAGS_GRADES_DESC = {\n            be: 'Below Expectations',\n            gs: 'Good start (GS)',\n            ms: 'Making strides (MS)',\n            grwi: 'Go run with it (GRWI)',\n            ae: 'Above expectations'\n        }\n\n        // Segment helpers\n        const segments = (dataset) => {\n            let hasval = [];\n            let noval = [];\n            let segment = [];\n\n            for (let i = 0; i < dataset.length; i++) {\n\n                if (dataset[i] == undefined) {\n                    noval.push(i);\n                } else {\n                    hasval.push(i);\n                }\n\n            }\n\n            for (const index of noval) {\n                if (index > 0 && index < (dataset.length - 1)) {\n                    const seg = [getStartPoint(dataset, index), getEndPoint(dataset, index)];\n                    segment.push(seg); //start-finish segment\n                }\n            }\n\n            segment = segment.filter(function (element) {\n                return element !== undefined;\n            });\n\n\n        };\n\n        const getEndPoint = (dataset, currindex) => {\n            let flag = true;\n            let i = ++currindex;\n            while (flag && i < dataset.length) {\n\n                if (dataset[i] != undefined) {\n                    flag = false;\n                } else {\n                    i++;\n                }\n\n            }\n\n            return dataset[i];\n\n        };\n\n        const getStartPoint = (dataset, currindex) => {\n            let flag = true;\n            let i = --currindex;\n\n            while (flag && i > 0) {\n                if (dataset[i] != undefined) {\n                    flag = false;\n                } else {\n                    i--;\n                }\n\n            }\n\n            return dataset[i];\n\n\n        }\n\n        for (let i = 0; i < performance.length; i++) {\n            var p = performance[i];\n\n            const year = p.details.year.toString();\n            const term = p.details.term.toString();\n\n            labels.push(['T' + term, year]);\n\n            if (p.details.avggrades == null) {\n                p.details.avggrades = undefined;\n            }\n            grades.push(p.details.avggrades);\n\n            if (p.details.effortaverage == null) {\n                p.details.effortaverage = undefined;\n            }\n            effort.push(p.details.effortaverage);\n\n            if (p.details.percentageattended == null) {\n                p.details.percentageattended = undefined;\n            }\n            attendance.push(p.details.percentageattended);\n\n        }\n\n        const skipped = (ctx, value) => ctx.p0.skip || ctx.p1.skip ? value : undefined;\n        // End Segment helpers\n\n        const sgrades = segments(grades);\n        const seffort = segments(effort);\n        const sattendance = segments(attendance);\n\n        sets.push({\n            label: TAGS.avggrades,\n            data: grades,\n            fill: false,\n            borderColor: '#31326f',\n            segment: {\n                borderDash: ctx => skipped(ctx, sgrades),\n            },\n            backgroundColor: '#31326f',\n            tension: 0.1,\n        });\n\n        sets.push({\n            label: TAGS.avgeffort,\n            data: effort,\n            fill: false,\n            borderColor: '#ffc93c',\n            segment: {\n                borderDash: ctx => skipped(ctx, seffort),\n            },\n            backgroundColor: '#ffc93c',\n            tension: 0.1\n        });\n\n        sets.push({\n            label: TAGS.avgattendance,\n            data: attendance,\n            fill: false,\n            borderColor: '#1687a7',\n            segment: {\n                borderDash: ctx => skipped(ctx, sattendance),\n            },\n            backgroundColor: '#1687a7',\n            tension: 0.1\n        });\n\n        const data = {\n            labels: labels,\n            datasets: sets\n        };\n\n        const options = {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                tooltip: {\n                    callbacks: {\n                        label: function (context) {\n\n                            if (context.dataset.label == TAGS.avggrades) {\n\n                                if (context.parsed.y > 0.00 && context.parsed.y <= 20.00) {\n                                    return TAGS_GRADES_DESC.be;\n                                } else if (context.parsed.y > 20.00 && context.parsed.y <= 40.00) {\n                                    return TAGS_GRADES_DESC.gs\n                                } else if (context.parsed.y > 40.00 && context.parsed.y <= 60.00) {\n                                    return TAGS_GRADES_DESC.ms;\n                                } else if (context.parsed.y > 60.00 && context.parsed.y <= 80.00) {\n                                    return TAGS_GRADES_DESC.grwi;\n                                } else if (context.parsed.y > 80.00) {\n                                    return TAGS_GRADES_DESC.ae\n                                }\n                            }\n                            if (context.dataset.label == TAGS.avgeffort) {\n                                if (parseFloat(context.parsed.y) > 0.00 && parseFloat(context.parsed.y) <= 25.00) {\n                                    return TAGS_EFFORTS_DESC.ni;\n                                } else if (parseFloat(context.parsed.y) > 25.00 && parseFloat(context.parsed.y) <= 50.00) {\n                                    return TAGS_EFFORTS_DESC.avg\n                                } else if (parseFloat(context.parsed.y) > 50.00 && parseFloat(context.parsed.y) < 95.00) {\n                                    return TAGS_EFFORTS_DESC.vg;\n                                } else if (parseFloat(context.parsed.y) >= 95.00) {\n                                    return TAGS_EFFORTS_DESC.e;\n                                }\n                            } else {\n\n                                return context.parsed.y + \"%\";\n                            }\n                        }\n                    }\n                }\n            },\n            scales: {\n                y: {\n                    suggestedMin: 25,\n                    display: false,\n\n                }\n            }\n\n\n        }\n\n        const plugin = {\n            id: 'custom_canvas_background_color',\n            beforeDraw: (chart) => {\n                const ctx = chart.canvas.getContext('2d');\n                ctx.save();\n                ctx.globalCompositeOperation = 'destination-over';\n                ctx.fillStyle = '#f6f5f5';\n                ctx.fillRect(0, 0, chart.width, chart.height);\n                ctx.restore();\n            }\n        };\n\n        new Chart(ctx, {\n            type: 'line',\n            data: data,\n            options: options,\n            plugins: [plugin],\n\n        });\n    }\n    AcademicInfo.prototype.getEffortHistory = function () {\n\n        const element = document.querySelector('.grade-effort-trend');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        // Add spinner.\n        $('#effort-history-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_effort_history',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                Log.debug(response);\n                const htmlResult = response.html;\n                $('#effort-history-tb').attr('hidden', true);\n                $('[data-region=\"effort-history-table\"]').replaceWith(htmlResult);\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('[data-region=\"effort-history-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n    }\n    AcademicInfo.prototype.getGradeHistory = function () {\n\n        const element = document.querySelector('.grade-effort-trend');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        // Add spinner.\n        $('#grade-history-tb').removeAttr('hidden');\n\n        Ajax.call([{\n            methodname: 'report_mystudent_get_grade_history',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                Log.debug(response);\n                const htmlResult = response.html;\n                $('#grade-history-tb').attr('hidden', true);\n                $('[data-region=\"grade-history-table\"]').replaceWith(htmlResult);\n\n            },\n\n            fail: function (reason) {\n                Log.error('report_mystudent: Unable to get context.');\n                Log.debug(reason);\n                $('[data-region=\"grade-history-table\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n\n    }\n\n    return {\n        init: init\n    }\n});"],"file":"gradesandeffort.min.js"}